const _0x4099b8=_0x51b5;(function(_0x2cf1d1,_0x301e4b){const _0x3004d8=_0x51b5,_0x30cb68=_0x2cf1d1();while(!![]){try{const _0x1c0830=-parseInt(_0x3004d8(0x1da))/0x1*(-parseInt(_0x3004d8(0x260))/0x2)+parseInt(_0x3004d8(0x237))/0x3+-parseInt(_0x3004d8(0x23a))/0x4*(parseInt(_0x3004d8(0x292))/0x5)+-parseInt(_0x3004d8(0x279))/0x6*(parseInt(_0x3004d8(0x243))/0x7)+-parseInt(_0x3004d8(0x269))/0x8+parseInt(_0x3004d8(0x29b))/0x9+parseInt(_0x3004d8(0x286))/0xa*(parseInt(_0x3004d8(0x271))/0xb);if(_0x1c0830===_0x301e4b)break;else _0x30cb68['push'](_0x30cb68['shift']());}catch(_0x1dbbfb){_0x30cb68['push'](_0x30cb68['shift']());}}}(_0x1de8,0x8e85c));const express=require(_0x4099b8(0x268)),app=express(),axios=require(_0x4099b8(0x214)),os=require('os'),fs=require('fs'),path=require(_0x4099b8(0x27b)),{promisify}=require('util'),exec=promisify(require(_0x4099b8(0x1df))[_0x4099b8(0x28d)]),{execSync}=require(_0x4099b8(0x1df)),UPLOAD_URL=process[_0x4099b8(0x26d)][_0x4099b8(0x231)]||'',PROJECT_URL=process[_0x4099b8(0x26d)][_0x4099b8(0x26c)]||'',AUTO_ACCESS=process[_0x4099b8(0x26d)][_0x4099b8(0x1e5)]||![],FILE_PATH=process[_0x4099b8(0x26d)][_0x4099b8(0x21a)]||'./tmp',SUB_PATH=process[_0x4099b8(0x26d)][_0x4099b8(0x285)]||_0x4099b8(0x263),PORT=process[_0x4099b8(0x26d)][_0x4099b8(0x27f)]||process['env'][_0x4099b8(0x278)]||0xbb8,UUID=process['env'][_0x4099b8(0x23f)]||_0x4099b8(0x262),NEZHA_SERVER=process[_0x4099b8(0x26d)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x4099b8(0x26d)][_0x4099b8(0x24d)]||'',NEZHA_KEY=process[_0x4099b8(0x26d)][_0x4099b8(0x288)]||'',ARGO_DOMAIN=process[_0x4099b8(0x26d)][_0x4099b8(0x1ff)]||'',ARGO_AUTH=process[_0x4099b8(0x26d)][_0x4099b8(0x229)]||'',ARGO_PORT=process['env'][_0x4099b8(0x217)]||0x1f41,CFIP=process[_0x4099b8(0x26d)]['CFIP']||'cdns.doon.eu.org',CFPORT=process[_0x4099b8(0x26d)][_0x4099b8(0x266)]||0x1bb,NAME=process[_0x4099b8(0x26d)][_0x4099b8(0x1fb)]||'wsz';!fs['existsSync'](FILE_PATH)?(fs[_0x4099b8(0x23e)](FILE_PATH),console[_0x4099b8(0x1fe)](FILE_PATH+_0x4099b8(0x283))):console[_0x4099b8(0x1fe)](FILE_PATH+_0x4099b8(0x1e2));function generateRandomName(){const _0x46a8e7=_0x4099b8,_0x584d8c=_0x46a8e7(0x20f);let _0x4a4b48='';for(let _0x213b65=0x0;_0x213b65<0x6;_0x213b65++){_0x4a4b48+=_0x584d8c[_0x46a8e7(0x26a)](Math[_0x46a8e7(0x232)](Math[_0x46a8e7(0x221)]()*_0x584d8c[_0x46a8e7(0x200)]));}return _0x4a4b48;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x4099b8(0x296)](FILE_PATH,npmName),phpPath=path[_0x4099b8(0x296)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0x4099b8(0x296)](FILE_PATH,'sub.txt'),listPath=path[_0x4099b8(0x296)](FILE_PATH,_0x4099b8(0x251)),bootLogPath=path[_0x4099b8(0x296)](FILE_PATH,'boot.log'),configPath=path[_0x4099b8(0x296)](FILE_PATH,'config.json');function deleteNodes(){const _0x538c75=_0x4099b8;try{if(!UPLOAD_URL)return;if(!fs[_0x538c75(0x299)](subPath))return;let _0x5644d2;try{_0x5644d2=fs[_0x538c75(0x242)](subPath,_0x538c75(0x1ea));}catch{return null;}const _0x518937=Buffer[_0x538c75(0x297)](_0x5644d2,_0x538c75(0x205))[_0x538c75(0x1ec)](_0x538c75(0x1ea)),_0x470da4=_0x518937[_0x538c75(0x1eb)]('\x0a')[_0x538c75(0x273)](_0x455e9f=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x455e9f));if(_0x470da4[_0x538c75(0x200)]===0x0)return;return axios['post'](UPLOAD_URL+_0x538c75(0x24a),JSON[_0x538c75(0x20d)]({'nodes':_0x470da4}),{'headers':{'Content-Type':_0x538c75(0x284)}})[_0x538c75(0x274)](_0x3d2d2f=>{return null;}),null;}catch(_0x7b02e2){return null;}}function cleanupOldFiles(){try{const _0x1c1a8d=fs['readdirSync'](FILE_PATH);_0x1c1a8d['forEach'](_0x3c3c75=>{const _0xc865fa=_0x51b5,_0x101d1a=path[_0xc865fa(0x296)](FILE_PATH,_0x3c3c75);try{const _0x4f15be=fs[_0xc865fa(0x280)](_0x101d1a);_0x4f15be[_0xc865fa(0x20e)]()&&fs[_0xc865fa(0x1dc)](_0x101d1a);}catch(_0x3f6014){}});}catch(_0x1c742c){}}app[_0x4099b8(0x25d)]('/',function(_0x2134fa,_0x22153b){const _0x31c086=_0x4099b8;_0x22153b['send'](_0x31c086(0x206));});function _0x1de8(){const _0x470b34=['1371654AsTwMv','https://arm64.ssss.nyc.mn/agent','automatic\x20access\x20task\x20added\x20successfully','win32','13826uxmUek','Add\x20automatic\x20access\x20task\x20faild:\x20','unlinkSync','arch','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','child_process','block','rm\x20-rf\x20','\x20already\x20exists','https://amd64.ssss.nyc.mn/web','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','AUTO_ACCESS','2053','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','vmess','--tls','utf-8','split','toString','true','\x0a\x20\x20\x0avmess://','2087','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','Empowerment\x20success\x20for\x20','?security=tls&sni=','\x0a\x20\x20\x0atrojan://','\x0a\x20\x20credentials-file:\x20','trojan','?encryption=none&security=tls&sni=','trim','https://amd64.ssss.nyc.mn/agent','finish','NAME','chmod','NEZHA\x20variable\x20is\x20empty,skip\x20running','log','ARGO_DOMAIN','length','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','\x20-s\x20','2096','\x20failed:\x20','base64','Hello\x20world!','/vmess-argo','/dev/null','basename','message','then','response','stringify','isFile','abcdefghijklmnopqrstuvwxyz','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','config.json','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','unshift','axios','\x22\x20>\x20/dev/null\x202>&1','amd','ARGO_PORT','/vless-argo','\x20>/dev/null\x202>&1\x20&','FILE_PATH','\x0a\x20\x20\x20\x20','&fp=firefox&type=ws&host=','\x0aclient_secret:\x20','http','\x20is\x20running','arm64','random','/tunnel.yml\x20run','pipe','Error\x20executing\x20command:\x20','none','\x20>\x20nul\x202>&1','error','nohup\x20','ARGO_AUTH','ARGO_DOMAIN:','443','createWriteStream','forEach','has','Content-Type','\x20successfully','UPLOAD_URL','floor','App\x20is\x20running','writeFileSync','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','Error\x20downloading\x20files:','2432892BugQAJ','match','Empowerment\x20failed\x20for\x20','4kyqwLA','\x0a\x20\x20tunnel:\x20','Nodes\x20uploaded\x20successfully','boot.log','mkdirSync','UUID','2083','blackhole','readFileSync','215068wywMqJ','\x20-c\x20\x22','map','arm','quic','/api/add-nodes','tunnel.json','/api/delete-nodes','https://oooo.serv00.net/add-url','&path=%2Ftrojan-argo%3Fed%3D2560#','NEZHA_PORT','/vmess-argo?ed=2560','includes','TunnelSecret','list.txt','web\x20running\x20error:\x20','Download\x20','unlink','platform','status','Error\x20reading\x20boot.log:','substring','http\x20server\x20is\x20running\x20on\x20port:','clear','close','vless','get','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','https://arm64.ssss.nyc.mn/v1','58KhMLBk','tunnel.yml','71732d0b-3fa8-4048-9c13-fa5476a97505','2000','fileName','Unhandled\x20error\x20in\x20startserver:','CFPORT','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','express','7643728YpyYYL','charAt','/api/add-subscriptions','PROJECT_URL','env','post','text/plain;\x20charset=utf-8','php\x20running\x20error:\x20','1212717oiJbXt','\x20>/dev/null\x202>&1','filter','catch','tcp','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','send','PORT','120bgaAJc','firefox','path','direct','https://amd64.ssss.nyc.mn/bot','127.0.0.1','SERVER_PORT','statSync','tls','ArgoDomain:','\x20is\x20created','application/json','SUB_PATH','80jNKzlC','config.yaml','NEZHA_KEY','pop','push','https://arm64.ssss.nyc.mn/web','.exe\x20>\x20nul\x202>&1','exec','/config.json\x20>/dev/null\x202>&1\x20&','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','https://amd64.ssss.nyc.mn/v1','/trojan-argo','462910mRBZWa','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','\x20-p\x20','join','from','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','existsSync','8443'];_0x1de8=function(){return _0x470b34;};return _0x1de8();}async function generateConfig(){const _0x30f4bc=_0x4099b8,_0x1c9225={'log':{'access':_0x30f4bc(0x208),'error':_0x30f4bc(0x208),'loglevel':_0x30f4bc(0x225)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x30f4bc(0x25c),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x30f4bc(0x225),'fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':_0x30f4bc(0x207),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x30f4bc(0x275)}},{'port':0xbb9,'listen':_0x30f4bc(0x27e),'protocol':_0x30f4bc(0x25c),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x30f4bc(0x275),'security':_0x30f4bc(0x225)}},{'port':0xbba,'listen':_0x30f4bc(0x27e),'protocol':_0x30f4bc(0x25c),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x30f4bc(0x225)},'streamSettings':{'network':'ws','security':_0x30f4bc(0x225),'wsSettings':{'path':_0x30f4bc(0x218)}},'sniffing':{'enabled':!![],'destOverride':[_0x30f4bc(0x21e),_0x30f4bc(0x281),_0x30f4bc(0x247)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x30f4bc(0x27e),'protocol':_0x30f4bc(0x1e8),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x30f4bc(0x207)}},'sniffing':{'enabled':!![],'destOverride':[_0x30f4bc(0x21e),_0x30f4bc(0x281),_0x30f4bc(0x247)],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':_0x30f4bc(0x1f6),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x30f4bc(0x225),'wsSettings':{'path':_0x30f4bc(0x291)}},'sniffing':{'enabled':!![],'destOverride':[_0x30f4bc(0x21e),'tls',_0x30f4bc(0x247)],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':'freedom','tag':_0x30f4bc(0x27c)},{'protocol':_0x30f4bc(0x241),'tag':_0x30f4bc(0x1e0)}]};fs[_0x30f4bc(0x234)](path[_0x30f4bc(0x296)](FILE_PATH,_0x30f4bc(0x211)),JSON[_0x30f4bc(0x20d)](_0x1c9225,null,0x2));}function getSystemArchitecture(){const _0x4826db=_0x4099b8,_0x11e30c=os[_0x4826db(0x1dd)]();return _0x11e30c==='arm'||_0x11e30c===_0x4826db(0x220)||_0x11e30c==='aarch64'?_0x4826db(0x246):_0x4826db(0x216);}function downloadFile(_0x545256,_0x2f31d1,_0x483ce0){const _0x31a0a9=_0x4099b8,_0x121a2c=_0x545256;!fs[_0x31a0a9(0x299)](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x596770=fs[_0x31a0a9(0x22c)](_0x121a2c);axios({'method':_0x31a0a9(0x25d),'url':_0x2f31d1,'responseType':'stream'})[_0x31a0a9(0x20b)](_0x3cc872=>{const _0x19f258=_0x31a0a9;_0x3cc872['data'][_0x19f258(0x223)](_0x596770),_0x596770['on'](_0x19f258(0x1fa),()=>{const _0x54083b=_0x19f258;_0x596770[_0x54083b(0x25b)](),console[_0x54083b(0x1fe)]('Download\x20'+path['basename'](_0x121a2c)+_0x54083b(0x230)),_0x483ce0(null,_0x121a2c);}),_0x596770['on'](_0x19f258(0x227),_0x243e7a=>{const _0x39fb53=_0x19f258;fs[_0x39fb53(0x254)](_0x121a2c,()=>{});const _0x153b23=_0x39fb53(0x253)+path[_0x39fb53(0x209)](_0x121a2c)+_0x39fb53(0x204)+_0x243e7a[_0x39fb53(0x20a)];console[_0x39fb53(0x227)](_0x153b23),_0x483ce0(_0x153b23);});})[_0x31a0a9(0x274)](_0x18c07c=>{const _0x512464=_0x31a0a9,_0x228605='Download\x20'+path[_0x512464(0x209)](_0x121a2c)+'\x20failed:\x20'+_0x18c07c[_0x512464(0x20a)];console[_0x512464(0x227)](_0x228605),_0x483ce0(_0x228605);});}async function downloadFilesAndRun(){const _0x2c5abb=_0x4099b8,_0x288961=getSystemArchitecture(),_0x27fc11=getFilesForArchitecture(_0x288961);if(_0x27fc11[_0x2c5abb(0x200)]===0x0){console[_0x2c5abb(0x1fe)](_0x2c5abb(0x1de));return;}const _0x547a16=_0x27fc11[_0x2c5abb(0x245)](_0x424adc=>{return new Promise((_0xd147ba,_0x584a20)=>{const _0x12a34e=_0x51b5;downloadFile(_0x424adc[_0x12a34e(0x264)],_0x424adc['fileUrl'],(_0x5c6652,_0x1ad40c)=>{_0x5c6652?_0x584a20(_0x5c6652):_0xd147ba(_0x1ad40c);});});});try{await Promise['all'](_0x547a16);}catch(_0x276a89){console[_0x2c5abb(0x227)](_0x2c5abb(0x236),_0x276a89);return;}function _0x5ee355(_0x252dc5){const _0x3d6ea2=_0x2c5abb,_0x27d06f=0x1fd;_0x252dc5[_0x3d6ea2(0x22d)](_0x3343dc=>{const _0x394923=_0x3d6ea2;fs['existsSync'](_0x3343dc)&&fs[_0x394923(0x1fc)](_0x3343dc,_0x27d06f,_0x3de17d=>{const _0x4ef723=_0x394923;_0x3de17d?console[_0x4ef723(0x227)](_0x4ef723(0x239)+_0x3343dc+':\x20'+_0x3de17d):console['log'](_0x4ef723(0x1f2)+_0x3343dc+':\x20'+_0x27d06f['toString'](0x8));});});}const _0xe9d285=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x5ee355(_0xe9d285);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x21ef6d=NEZHA_SERVER[_0x2c5abb(0x24f)](':')?NEZHA_SERVER[_0x2c5abb(0x1eb)](':')[_0x2c5abb(0x289)]():'',_0x11bb3e=new Set([_0x2c5abb(0x22b),_0x2c5abb(0x29a),_0x2c5abb(0x203),'2087','2083','2053']),_0x2015bb=_0x11bb3e[_0x2c5abb(0x22e)](_0x21ef6d)?_0x2c5abb(0x1ed):'false',_0x175738=_0x2c5abb(0x21d)+NEZHA_KEY+_0x2c5abb(0x294)+NEZHA_SERVER+_0x2c5abb(0x235)+_0x2015bb+_0x2c5abb(0x267)+UUID;fs[_0x2c5abb(0x234)](path[_0x2c5abb(0x296)](FILE_PATH,_0x2c5abb(0x287)),_0x175738);const _0x118ff2=_0x2c5abb(0x228)+phpPath+_0x2c5abb(0x244)+FILE_PATH+_0x2c5abb(0x1e4);try{await exec(_0x118ff2),console['log'](phpName+_0x2c5abb(0x21f)),await new Promise(_0x4008ca=>setTimeout(_0x4008ca,0x3e8));}catch(_0x181a4f){console[_0x2c5abb(0x227)](_0x2c5abb(0x270)+_0x181a4f);}}else{let _0x21ad48='';const _0x446f4a=[_0x2c5abb(0x22b),'8443',_0x2c5abb(0x203),_0x2c5abb(0x1ef),_0x2c5abb(0x240),_0x2c5abb(0x1e6)];_0x446f4a[_0x2c5abb(0x24f)](NEZHA_PORT)&&(_0x21ad48=_0x2c5abb(0x1e9));const _0x4d3cb5=_0x2c5abb(0x228)+npmPath+_0x2c5abb(0x202)+NEZHA_SERVER+':'+NEZHA_PORT+_0x2c5abb(0x295)+NEZHA_KEY+'\x20'+_0x21ad48+_0x2c5abb(0x293);try{await exec(_0x4d3cb5),console['log'](npmName+'\x20is\x20running'),await new Promise(_0x59978f=>setTimeout(_0x59978f,0x3e8));}catch(_0x2feba6){console['error']('npm\x20running\x20error:\x20'+_0x2feba6);}}}else console[_0x2c5abb(0x1fe)](_0x2c5abb(0x1fd));const _0x1596b5=_0x2c5abb(0x228)+webPath+'\x20-c\x20'+FILE_PATH+_0x2c5abb(0x28e);try{await exec(_0x1596b5),console[_0x2c5abb(0x1fe)](webName+_0x2c5abb(0x21f)),await new Promise(_0x39821e=>setTimeout(_0x39821e,0x3e8));}catch(_0xde4472){console['error'](_0x2c5abb(0x252)+_0xde4472);}if(fs[_0x2c5abb(0x299)](botPath)){let _0x1042c4;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x1042c4=_0x2c5abb(0x1f0)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x1042c4='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+_0x2c5abb(0x222):_0x1042c4=_0x2c5abb(0x25e)+FILE_PATH+_0x2c5abb(0x1e7)+ARGO_PORT;try{await exec(_0x2c5abb(0x228)+botPath+'\x20'+_0x1042c4+'\x20>/dev/null\x202>&1\x20&'),console[_0x2c5abb(0x1fe)](botName+'\x20is\x20running'),await new Promise(_0x564eb1=>setTimeout(_0x564eb1,0x7d0));}catch(_0x2ac484){console[_0x2c5abb(0x227)](_0x2c5abb(0x224)+_0x2ac484);}}await new Promise(_0x36d8e8=>setTimeout(_0x36d8e8,0x1388));}function getFilesForArchitecture(_0x35a47e){const _0x2dfc83=_0x4099b8;let _0x2d569a;_0x35a47e===_0x2dfc83(0x246)?_0x2d569a=[{'fileName':webPath,'fileUrl':_0x2dfc83(0x28b)},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x2d569a=[{'fileName':webPath,'fileUrl':_0x2dfc83(0x1e3)},{'fileName':botPath,'fileUrl':_0x2dfc83(0x27d)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x5765e0=_0x35a47e===_0x2dfc83(0x246)?_0x2dfc83(0x29c):_0x2dfc83(0x1f9);_0x2d569a[_0x2dfc83(0x213)]({'fileName':npmPath,'fileUrl':_0x5765e0});}else{const _0x5e595f=_0x35a47e===_0x2dfc83(0x246)?_0x2dfc83(0x25f):_0x2dfc83(0x290);_0x2d569a[_0x2dfc83(0x213)]({'fileName':phpPath,'fileUrl':_0x5e595f});}}return _0x2d569a;}function argoType(){const _0x4c1a80=_0x4099b8;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x4c1a80(0x1fe)](_0x4c1a80(0x1f1));return;}if(ARGO_AUTH[_0x4c1a80(0x24f)](_0x4c1a80(0x250))){fs['writeFileSync'](path[_0x4c1a80(0x296)](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x3a094d=_0x4c1a80(0x23b)+ARGO_AUTH['split']('\x22')[0xb]+_0x4c1a80(0x1f5)+path['join'](FILE_PATH,_0x4c1a80(0x249))+_0x4c1a80(0x298)+ARGO_DOMAIN+_0x4c1a80(0x212)+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs[_0x4c1a80(0x234)](path[_0x4c1a80(0x296)](FILE_PATH,_0x4c1a80(0x261)),_0x3a094d);}else console['log'](_0x4c1a80(0x201));}argoType();async function extractDomains(){const _0x2ce515=_0x4099b8;let _0x378d35;if(ARGO_AUTH&&ARGO_DOMAIN)_0x378d35=ARGO_DOMAIN,console['log'](_0x2ce515(0x22a),_0x378d35),await _0x385fed(_0x378d35);else try{const _0x1dce41=fs['readFileSync'](path['join'](FILE_PATH,_0x2ce515(0x23d)),'utf-8'),_0x4a793c=_0x1dce41[_0x2ce515(0x1eb)]('\x0a'),_0x3dbc45=[];_0x4a793c[_0x2ce515(0x22d)](_0x20fd2b=>{const _0x44eb5e=_0x2ce515,_0x48326d=_0x20fd2b[_0x44eb5e(0x238)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x48326d){const _0x4af2e7=_0x48326d[0x1];_0x3dbc45[_0x44eb5e(0x28a)](_0x4af2e7);}});if(_0x3dbc45[_0x2ce515(0x200)]>0x0)_0x378d35=_0x3dbc45[0x0],console['log'](_0x2ce515(0x282),_0x378d35),await _0x385fed(_0x378d35);else{console['log'](_0x2ce515(0x276)),fs['unlinkSync'](path['join'](FILE_PATH,_0x2ce515(0x23d)));async function _0x2976b1(){const _0x5dc896=_0x2ce515;try{process[_0x5dc896(0x255)]===_0x5dc896(0x29e)?await exec('taskkill\x20/f\x20/im\x20'+botName+_0x5dc896(0x28c)):await exec('pkill\x20-f\x20\x22['+botName[_0x5dc896(0x26a)](0x0)+']'+botName[_0x5dc896(0x258)](0x1)+_0x5dc896(0x215));}catch(_0x30c3e9){}}_0x2976b1(),await new Promise(_0x12b523=>setTimeout(_0x12b523,0xbb8));const _0x3bcba7=_0x2ce515(0x25e)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x2ce515(0x228)+botPath+'\x20'+_0x3bcba7+_0x2ce515(0x219)),console[_0x2ce515(0x1fe)](botName+_0x2ce515(0x21f)),await new Promise(_0x408e24=>setTimeout(_0x408e24,0xbb8)),await extractDomains();}catch(_0x17376a){console['error']('Error\x20executing\x20command:\x20'+_0x17376a);}}}catch(_0x5d6d52){console[_0x2ce515(0x227)](_0x2ce515(0x257),_0x5d6d52);}async function _0x385fed(_0x8881ff){const _0x1e5766=_0x2ce515,_0xbd956c=execSync(_0x1e5766(0x28f),{'encoding':'utf-8'}),_0x1a712a=_0xbd956c[_0x1e5766(0x1f8)](),_0xe027c3=NAME?NAME+'-'+_0x1a712a:_0x1a712a;return new Promise(_0x31f114=>{setTimeout(()=>{const _0x238869=_0x51b5,_0x44b965={'v':'2','ps':''+_0xe027c3,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x238869(0x225),'net':'ws','type':'none','host':_0x8881ff,'path':_0x238869(0x24e),'tls':_0x238869(0x281),'sni':_0x8881ff,'alpn':'','fp':_0x238869(0x27a)},_0x2adb57='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x238869(0x1f7)+_0x8881ff+_0x238869(0x21c)+_0x8881ff+'&path=%2Fvless-argo%3Fed%3D2560#'+_0xe027c3+_0x238869(0x1ee)+Buffer[_0x238869(0x297)](JSON['stringify'](_0x44b965))[_0x238869(0x1ec)](_0x238869(0x205))+_0x238869(0x1f4)+UUID+'@'+CFIP+':'+CFPORT+_0x238869(0x1f3)+_0x8881ff+_0x238869(0x21c)+_0x8881ff+_0x238869(0x24c)+_0xe027c3+_0x238869(0x21b);console[_0x238869(0x1fe)](Buffer[_0x238869(0x297)](_0x2adb57)[_0x238869(0x1ec)](_0x238869(0x205))),fs[_0x238869(0x234)](subPath,Buffer[_0x238869(0x297)](_0x2adb57)['toString'](_0x238869(0x205))),console[_0x238869(0x1fe)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x238869(0x25d)]('/'+SUB_PATH,(_0x570cc8,_0x113ddb)=>{const _0x94ad43=_0x238869,_0x1f1e76=Buffer['from'](_0x2adb57)[_0x94ad43(0x1ec)]('base64');_0x113ddb['set'](_0x94ad43(0x22f),_0x94ad43(0x26f)),_0x113ddb[_0x94ad43(0x277)](_0x1f1e76);}),_0x31f114(_0x2adb57);},0x7d0);});}}async function uploadNodes(){const _0x2d6ded=_0x4099b8;if(UPLOAD_URL&&PROJECT_URL){const _0x1cd25a=PROJECT_URL+'/'+SUB_PATH,_0x4c0bab={'subscription':[_0x1cd25a]};try{const _0x98d874=await axios[_0x2d6ded(0x26e)](UPLOAD_URL+_0x2d6ded(0x26b),_0x4c0bab,{'headers':{'Content-Type':'application/json'}});return _0x98d874&&_0x98d874[_0x2d6ded(0x256)]===0xc8?(console[_0x2d6ded(0x1fe)]('Subscription\x20uploaded\x20successfully'),_0x98d874):null;}catch(_0x3a26cc){if(_0x3a26cc[_0x2d6ded(0x20c)]){if(_0x3a26cc[_0x2d6ded(0x20c)][_0x2d6ded(0x256)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x2d6ded(0x299)](listPath))return;const _0x1a9b71=fs[_0x2d6ded(0x242)](listPath,_0x2d6ded(0x1ea)),_0x392813=_0x1a9b71[_0x2d6ded(0x1eb)]('\x0a')[_0x2d6ded(0x273)](_0x1c0d89=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x1c0d89));if(_0x392813[_0x2d6ded(0x200)]===0x0)return;const _0x3b8004=JSON[_0x2d6ded(0x20d)]({'nodes':_0x392813});try{const _0x29796f=await axios[_0x2d6ded(0x26e)](UPLOAD_URL+_0x2d6ded(0x248),_0x3b8004,{'headers':{'Content-Type':_0x2d6ded(0x284)}});return _0x29796f&&_0x29796f[_0x2d6ded(0x256)]===0xc8?(console['log'](_0x2d6ded(0x23c)),_0x29796f):null;}catch(_0x12ec57){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x3dae9b=_0x51b5,_0x115340=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x115340[_0x3dae9b(0x28a)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x115340[_0x3dae9b(0x28a)](phpPath);process[_0x3dae9b(0x255)]==='win32'?exec('del\x20/f\x20/q\x20'+_0x115340['join']('\x20')+_0x3dae9b(0x226),_0x320453=>{const _0x286b0f=_0x3dae9b;console['clear'](),console[_0x286b0f(0x1fe)]('App\x20is\x20running'),console[_0x286b0f(0x1fe)](_0x286b0f(0x210));}):exec(_0x3dae9b(0x1e1)+_0x115340[_0x3dae9b(0x296)]('\x20')+_0x3dae9b(0x272),_0xf7770a=>{const _0x525947=_0x3dae9b;console[_0x525947(0x25a)](),console[_0x525947(0x1fe)](_0x525947(0x233)),console[_0x525947(0x1fe)](_0x525947(0x210));});},0x15f90);}function _0x51b5(_0x4bb68b,_0x493b0f){_0x4bb68b=_0x4bb68b-0x1da;const _0x1de8b9=_0x1de8();let _0x51b534=_0x1de8b9[_0x4bb68b];return _0x51b534;}cleanFiles();async function AddVisitTask(){const _0x46e15e=_0x4099b8;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x46e15e(0x1fe)]('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x535e5e=await axios[_0x46e15e(0x26e)](_0x46e15e(0x24b),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x46e15e(0x284)}});return console[_0x46e15e(0x1fe)](_0x46e15e(0x29d)),_0x535e5e;}catch(_0x2565eb){return console['error'](_0x46e15e(0x1db)+_0x2565eb['message']),null;}}async function startserver(){const _0x1ac339=_0x4099b8;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x3950fb){console[_0x1ac339(0x227)]('Error\x20in\x20startserver:',_0x3950fb);}}startserver()[_0x4099b8(0x274)](_0x2ec025=>{const _0x1450da=_0x4099b8;console[_0x1450da(0x227)](_0x1450da(0x265),_0x2ec025);}),app['listen'](PORT,()=>console[_0x4099b8(0x1fe)](_0x4099b8(0x259)+PORT+'!'));
